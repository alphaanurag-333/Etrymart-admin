<div class="container mt-3 gx-0 ">
  <h3 class="mb-3">Seller Wallet Transactions</h3>
  <!-- Search -->
  <div class="mb-3 d-flex gap-2">
    <input
      type="text"
      class="form-control"
      [(ngModel)]="search"
      placeholder="Search by description..."
    />
    <button class="btn btn-primary  gradient-btn" (click)="onSearch()">Search</button>
  </div>
  <div class="table-responsive">
    <!-- Loading -->
    <div *ngIf="loading" class="text-center">
      <div class="spinner-border text-primary" role="status"></div>
      <p>Loading...</p>
    </div>

    <!-- Error -->
    <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

    <!-- Table -->
    <table
      *ngIf="!loading && transactions.length > 0"
      class="table table-bordered  text-nowrap "
    >
      <thead class="transaction-tablehead">
        <tr class="text-center">
          <th>Date</th>
          <th>Type</th>
          <th>Amount</th>
          <th>Balance After</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr class="text-center" *ngFor="let tx of transactions">
          <td>{{ tx.createdAt | date : "short" }}</td>
          <td class="text-center">
            <span
              [ngClass]="{
                'text-success': tx.type === 'credit',
                'text-danger': tx.type === 'debit'
              }"
            >
              {{ tx.type | titlecase }}
            </span>
          </td>
          <td>{{ tx.amount | currency : "INR" }}</td>
          <td>{{ tx.balanceAfter | currency : "INR" }}</td>
          <td>{{ tx.description || "-" }}</td>
        </tr>
      </tbody>
    </table>

    <!-- Pagination -->
    <div
      *ngIf="totalPages > 1"
      class="d-flex justify-content-between align-items-center mt-3"
    >
      <button
        class="btn btn-outline-primary"
        (click)="changePage(offset / limit - 1)"
        [disabled]="offset === 0"
      >
        Previous
      </button>

      <span>Page {{ offset / limit + 1 }} of {{ totalPages }}</span>

      <button
        class="btn btn-outline-primary"
        (click)="changePage(offset / limit + 1)"
        [disabled]="offset / limit + 1 >= totalPages"
      >
        Next
      </button>
    </div>
  </div>
</div>
