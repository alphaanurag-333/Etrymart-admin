<div class="card shadow-sm border-0 rounded-4">
  <!-- Header -->
  <div
    class="card-header d-flex justify-content-between align-items-center rounded-top"
  >
    <h5 class="mb-0"><i class="fas fa-box me-2"></i>Product Details</h5>
    <button class="btn btn-light btn-sm px-3 fw-semibold" (click)="goBack()">
      <i class="fas fa-arrow-left me-1"></i>Back
    </button>
  </div>

  <ng-container *ngIf="product as p">
    <div class="card-body bg-light">
      <div class="row g-4">
        <!-- Thumbnail -->
        <div
          class="col-lg-4 text-center d-flex align-items-center justify-content-center"
        >
          <div class="image-view">
            <img
              [src]="p.thumbnail"
              alt="Thumbnail"
              class="img-thumbnail shadow-sm"
            />
          </div>
        </div>

        <!-- Main Info -->
        <div class="col-lg-8">
          <div class="row g-3">
            <div class="col-md-6">
              <strong>Product Name:</strong>
              <p class="mb-0">{{ p.name }}</p>
            </div>

            <div class="col-md-6">
              <strong>Category:</strong>
              <p class="mb-0">{{ categoryName }}</p>
            </div>

             <div class="col-md-6">
              <strong>SubCategory:</strong>
              <p class="mb-0">{{ subcategoryName }}</p>
            </div>

            <div class="col-md-6">
              <strong>SKU Code:</strong>
              <p class="mb-0">{{ p.sku_code }}</p>
            </div>

            <div class="col-md-6">
              <strong>Description:</strong>
              <div [innerHTML]="p.description"></div>
            </div>

            <div class="col-md-6">
              <strong>Unit Price:</strong>
              <p class="mb-0 text-success">₹{{ p.unit_price }}</p>
            </div>
            <div class="col-md-6">
              <strong>Tax (%):</strong>
              <p class="mb-0">{{ p.tax }}</p>
            </div>
            <div class="col-md-6">
              <strong>Discount:</strong>
              <p class="mb-0">{{ p.discount }}</p>
            </div>
            <div class="col-md-6">
              <strong>Discount Type:</strong>
              <p class="mb-0 text-capitalize">{{ p.discount_type }}</p>
            </div>
            <div class="col-md-6">
              <strong>Stock:</strong>
              <p class="mb-0">{{ p.current_stock }}</p>
            </div>
            <div class="col-md-6">
              <strong>Minimum Qty:</strong>
              <p class="mb-0">{{ p.min_qty }}</p>
            </div>

            <!-- Variants -->
            <div class="col-12" *ngIf="p.variants?.length">
              <strong>Variants:</strong>
              <ul>
                <li *ngFor="let variant of p.variants">
                  {{ variant.name }}: {{ variant.values.join(", ") }}
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <!-- Gallery -->
      <div class="mt-4" *ngIf="p.images?.length">
        <strong>Gallery</strong>
        <div class="d-flex flex-wrap gap-3 mt-2">
          <div
            *ngFor="let img of p.images"
            class="border rounded p-2 bg-white shadow-sm"
            style="width: 120px; height: 100px"
          >
            <div class="gallery">
              <img [src]="img" alt="Gallery Image" class="img-fluid" />
            </div>
          </div>
        </div>
      </div>

      <!-- Variation Options -->
      <div class="mt-5" *ngIf="p.variation_options?.length">
        <strong>Variation Options</strong>
        <div
          *ngFor="let option of p.variation_options"
          class="border rounded p-3 mb-3 bg-white shadow-sm"
        >
          <div class="row align-items-center">
            <div class="col-md-4">
              <strong>Variant Values:</strong>
              <ul class="mb-0">
                <li *ngFor="let key of objectKeys(option.variant_values)">
                  {{ key }}: {{ option.variant_values[key] }}
                </li>
              </ul>
            </div>

            <div class="col-md-2">
              <strong>Price:</strong>
              <p class="mb-0 text-success">₹{{ option.price }}</p>
            </div>

            <div class="col-md-2">
              <strong>Stock:</strong>
              <p class="mb-0">{{ option.stock }}</p>
            </div>

            <div class="col-md-4">
              <strong>Images:</strong>
              <div class="d-flex gap-2 flex-wrap">
                <img
                  *ngFor="let img of option.images"
                  [src]="img"
                  alt="Variant Image"
                  style="
                    height: 80px;
                    width: 80px;
                    object-fit: contain;
                    border-radius: 4px;
                    border: 1px solid #ddd;
                  "
                />
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-container>

  <div class="card-body text-center py-4" *ngIf="!product">
    <div class="spinner-border text-primary" role="status"></div>
    <p class="mt-3 text-muted">Loading product details...</p>
  </div>
</div>
